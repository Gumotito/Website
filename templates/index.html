<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is Dorin a chele?</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <button id="myButton">Is Dorin a chele?</button>
        <div id="answer"></div>
        <button id="askButton">Ask Agent</button>
        <div id="agentResponse"></div>
    </div>
    
    <div id="allAnswers"></div>

    <script>
        document.getElementById('myButton').addEventListener('click', function() {
            fetch('/show-text')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('answer').textContent = data.text;
                    displayAllAnswers(data.all_responses);
                });
        });

        function displayAllAnswers(responses) {
            const container = document.getElementById('allAnswers');
            container.innerHTML = '';
            
            const shuffled = [...responses].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(response => {
                const div = document.createElement('div');
                div.className = 'answer-box';
                div.textContent = response;
                
                const randomX = Math.random() * 80;
                const randomY = Math.random() * 80;
                const randomRotation = Math.random() * 20 - 10;
                
                div.style.left = randomX + '%';
                div.style.top = randomY + '%';
                div.style.transform = `rotate(${randomRotation}deg)`;
                
                container.appendChild(div);
            });
        }

        document.getElementById('askButton').addEventListener('click', function() {
            fetch('/ask-agent/Is%20Dorin%20a%20chele%3F')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('agentResponse').textContent = data.response || data.error;
                });
        });
    </script>
</body>
</html>